<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}AMF Finance App{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-100 min-h-screen overflow-hidden">
    <!-- Fixed Header -->
    <header class="fixed top-0 left-0 w-full h-16 bg-gray-900 text-white flex items-center z-50 shadow">
        <div class="flex items-center h-full px-6">
            <a href="{% url 'dashboard' %}" class="text-yellow-400 font-bold text-xl flex items-center gap-2">
                <i class="fa-solid fa-coins"></i> <span class="hidden sm:inline">AMF Finance</span>
            </a>
        </div>
        <div class="ml-auto flex items-center h-full px-6">
            {% if user.is_authenticated %}
                <span class="mr-4 flex items-center"><i class="fa-solid fa-user-circle mr-2"></i> {{ user.username }}</span>
                <a href="{% url 'profile' %}" class="mr-2 py-1 px-3 bg-gray-700 rounded text-gray-200 hover:bg-yellow-400 hover:text-gray-900 transition">Profile</a>
                <form action="{% url 'logout' %}" method="post" class="inline-block">
                    {% csrf_token %}
                    <button type="submit" class="py-1 px-3 bg-yellow-400 text-gray-900 rounded hover:bg-yellow-300 transition">
                        <i class="fa-solid fa-arrow-right-from-bracket"></i> Logout
                    </button>
                </form>
            {% else %}
                <a class="py-1 px-3 bg-green-600 text-white rounded hover:bg-green-500 transition" href="{% url 'login' %}">
                    <i class="fa-solid fa-sign-in-alt"></i> Login
                </a>
            {% endif %}
        </div>
    </header>
    <!-- Fixed Sidebar -->
    <aside class="fixed top-16 left-0 h-[calc(100vh-4rem)] w-56 bg-gray-900 text-white z-40 flex flex-col shadow-lg">
        <nav class="flex-1 mt-4">
            <ul class="space-y-2">
                <li>
                    <a href="{% url 'dashboard' %}" class="block px-6 py-3 rounded-r-full transition
                        {% if request.resolver_match.url_name == 'dashboard' %}bg-gray-800 text-yellow-400{% else %}hover:bg-gray-800 hover:text-yellow-400{% endif %}">
                        <i class="fa-solid fa-gauge"></i> Dashboard
                    </a>
                </li>
                <li>
                    <a href="{% url 'account-list' %}" class="block px-6 py-3 rounded-r-full transition
                        {% if request.resolver_match.url_name == 'account-list' %}bg-gray-800 text-yellow-400{% else %}hover:bg-gray-800 hover:text-yellow-400{% endif %}">
                        <i class="fa-solid fa-building-columns"></i> Accounts
                    </a>
                </li>
                <li>
                    <a href="{% url 'goal-list' %}" class="block px-6 py-3 rounded-r-full transition
                        {% if request.resolver_match.url_name == 'goal-list' %}bg-gray-800 text-yellow-400{% else %}hover:bg-gray-800 hover:text-yellow-400{% endif %}">
                        <i class="fa-solid fa-bullseye"></i> Goals
                    </a>
                </li>
                <li>
                    <a href="{% url 'transaction-list' %}" class="block px-6 py-3 rounded-r-full transition
                        {% if request.resolver_match.url_name == 'transaction-list' %}bg-gray-800 text-yellow-400{% else %}hover:bg-gray-800 hover:text-yellow-400{% endif %}">
                        <i class="fa-solid fa-arrows-rotate"></i> Transactions
                    </a>
                </li>
                <li>
                    <a href="{% url 'reports' %}" class="block px-6 py-3 rounded-r-full transition
                        {% if request.resolver_match.url_name == 'reports' %}bg-gray-800 text-yellow-400{% else %}hover:bg-gray-800 hover:text-yellow-400{% endif %}">
                        <i class="fa-solid fa-chart-pie"></i> Reports
                    </a>
                </li>
            </ul>
        </nav>
    </aside>
    <!-- Scrollable Main Content -->
    <main class="ml-56 pt-20 px-6 h-[calc(100vh-4rem)] overflow-y-auto">
        <div class="max-w-7xl mx-auto">
            {% if messages %}
                {% for message in messages %}
                    <div class="mb-4">
                        <div class="px-4 py-3 rounded shadow bg-{{ message.tags|default:'gray' }}-100 text-{{ message.tags|default:'gray' }}-700 flex items-center justify-between">
                            <span>{{ message }}</span>
                            <button type="button" class="bg-transparent text-lg" onclick="this.parentElement.parentElement.style.display='none'">&times;</button>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
            {% block content %}
            {% endblock %}
        </div>
    </main>
    {% block extra_js %}{% endblock %}
</body>
</html>