{% extends "base.html" %}
{% block title %}Goals{% endblock %}
{% block content %}
<h2 class="mb-4"><i class="fa-solid fa-bullseye"></i> Goals</h2>
<a href="{% url 'goal-create' %}" class="btn btn-primary mb-3">
    <i class="fa-solid fa-plus"></i> Add Goal
</a>
<table class="table table-striped table-hover align-middle shadow-sm">
    <thead class="table-dark">
        <tr>
            <th>Name</th>
            <th>Target (KES)</th>
            <th>Current (KES)</th>
            <th>Deadline</th>
            <th>Progress</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for goal in goals %}
    <tr>
        <td>
            <a href="{% url 'goal-detail' goal.pk %}" class="fw-bold">
                <i class="fa-solid fa-bullseye text-success"></i> {{ goal.name }}
            </a>
        </td>
        <td>
            <span class="badge bg-primary">{{ goal.target_amount|floatformat:2 }}</span>
        </td>
        <td>
            <span class="badge bg-info text-dark">{{ goal.current_amount|floatformat:2 }}</span>
        </td>
        <td>
            <span class="badge bg-secondary">{{ goal.deadline }}</span>
        </td>
        <td style="min-width: 120px;">
            <div class="progress" style="height: 20px;">
                <div
                    class="progress-bar {% if goal.progress_percent == 100 %}bg-success{% elif goal.progress_percent > 60 %}bg-info{% elif goal.progress_percent > 30 %}bg-warning{% else %}bg-danger{% endif %}"
                    role="progressbar"
                    style="width: {{ goal.progress_percent|floatformat:0 }}%;"
                    aria-valuenow="{{ goal.progress_percent|floatformat:0 }}"
                    aria-valuemin="0"
                    aria-valuemax="100"
                >
                    {{ goal.progress_percent|floatformat:0 }}%
                </div>
            </div>
        </td>
        <td>
            <a href="{% url 'goal-update' goal.pk %}" class="btn btn-sm btn-outline-warning me-1">
                <i class="fa-solid fa-pen"></i> Edit
            </a>
            <a href="{% url 'goal-delete' goal.pk %}" class="btn btn-sm btn-outline-danger">
                <i class="fa-solid fa-trash"></i> Delete
            </a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="6" class="text-center text-muted">No goals yet.</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}