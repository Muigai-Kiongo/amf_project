{% extends "base.html" %}
{% block title %}Transactions{% endblock %}
{% block content %}
<h2 class="mb-4"><i class="fa-solid fa-arrows-rotate"></i> Transactions</h2>
<a href="{% url 'transaction-create' %}" class="btn btn-primary mb-3">
    <i class="fa-solid fa-plus"></i> Add Transaction
</a>
<table class="table table-striped table-hover align-middle shadow-sm">
    <thead class="table-dark">
        <tr>
            <th>Date</th>
            <th>Type</th>
            <th>Category</th>
            <th>Amount (KES)</th>
            <th>Budget</th>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for transaction in transactions %}
    <tr>
        <td>
            <span class="badge bg-secondary">{{ transaction.date }}</span>
        </td>
        <td>
            <span class="badge {% if transaction.type == 'income' %}bg-success{% else %}bg-danger{% endif %}">
                {{ transaction.get_type_display }}
            </span>
        </td>
        <td>
            <span class="badge bg-info text-dark">{{ transaction.category }}</span>
        </td>
        <td>
            <span class="badge bg-primary">{{ transaction.amount|floatformat:2 }}</span>
        </td>
        <td>
            <span class="badge bg-warning text-dark">{{ transaction.budget }}</span>
        </td>
        <td>
            {{ transaction.description|default:"(No description)" }}
        </td>
        <td>
            <a href="{% url 'transaction-detail' transaction.pk %}" class="btn btn-sm btn-outline-info me-1">
                <i class="fa-solid fa-eye"></i> View
            </a>
            <a href="{% url 'transaction-update' transaction.pk %}" class="btn btn-sm btn-outline-warning me-1">
                <i class="fa-solid fa-pen"></i> Edit
            </a>
            <a href="{% url 'transaction-delete' transaction.pk %}" class="btn btn-sm btn-outline-danger">
                <i class="fa-solid fa-trash"></i> Delete
            </a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="7" class="text-center text-muted">No transactions yet.</td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}